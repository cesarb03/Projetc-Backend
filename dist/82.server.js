"use strict";exports.id=82,exports.ids=[82,503],exports.modules={724:(t,o,e)=>{e.d(o,{Z:()=>d});const c=JSON.parse('{"type":"service_account","project_id":"project-backend-10cad","private_key_id":"e5f1a619603bb4bcca92891befaae5bbd9bdab11","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDV38QfHPi/IR6v\\nMt4mdUHkK8TaJALQgFyFXOXeAc78XO3qaBKl8jLXFBqqqD5yJhRnc1d5vuUGNuIg\\nG06KeAjoDM0qAVsDZPx3leMO+fcFEAQCCXC/qAKQeGkw4v2ypXyQDDz63Y0YwAAm\\n4Ze9pvEyAuAthmPGlLcdCd+C30oYJftc9Avmr1xgxnI9Y6grX71FcO07IO2jTJ1v\\n7dfnf8O05rw14feTyGhp1mgL8paHzx6ktb+1YGpuGhFFlke7iLfn57YdCD/K9fJb\\nGq2Zkvyeb+QxN0dtPKNdt15VjeHay/XaHHHll5cb4Fy0OkX9Dd/KNXwTcyLAtLmz\\nOAjfaARJAgMBAAECggEAFsZ8eR+5sYjSXq/ZDllgSe8LSHubPR7eO2l4JRsmMqOm\\nxlaM3dUb6uF+MXw3IirB835J63ITq4S+sdKWm5JKyINMedOpIIRpikaQ5nBiCMz6\\n0Ei3FAHNPBtGgGk7wQF0cVaMS965/s+7dGiDozOa7ct2mgJ8r5H4qgP6JFKo7kcz\\nNIs1hZhj2GeEM9fo5tRfqNF75vbJutNf4x/ixle+2+p22tmGbwqdAPHu/g/Ym+E4\\niBvRX7LB/hyPLHkP7abCUBvAUgzdIar5KhWV/D8Uz4rf9QbshAJnYH2rDhilb+oj\\nrYiZZLjE/RPPMwaB6EnOJRkAH460AUdzY5enmjlDAQKBgQD7q3GO+MNZmS/ra80h\\nO0NwjtLknv1CBADvdVHYJyAGQg64eGe4VUJ9KBhcqNLkNcWgTmfHMtz/3ki749Jy\\nyn6ykmPf/Y0VxeeRgRElabKg0s3X2flu8fEYE23CkfsVVSSqKmQUCLBOXzaibej8\\nDzcQ4D5mGWJ9B/rnRR2sfEQ3qQKBgQDZjdcStP7ZVk1l8FwQ8XUpMtoqMZdNN+MA\\nT3+l35uF/6bxdhTZW+c7tyl8n4HnqlXsL6EliSXaaIxcpMX7NfmgIn0bpELjWgsV\\nSSeSUTeojACO22jHnE+2LLh5/SyfFwBDXyhSOR1c/aIf2gtpvUiKpzx6paFx9vUl\\n6mDRoC7LoQKBgQDr3xg0ZoQ4gnE+FTARWEjxwnp32WcFq1jxFSTbEHhcRSckz3xu\\ncEI7qQuENJpLVvZdM37iXJJyoPPMXU7NVWn/lWJT+YB0iqJpZe0bAoBvaIOSLXIx\\nAEL1TKhPdqA7sywE7GwVtrr/CQ/clmSJcP0sLO9uo5YCFyuZ+9Y+5czN2QKBgAvn\\naPdLFA7MXBvR1RfQPnrsn2djo0XEYxVnRDLNU3M3k+jubyGdl796vDhnefI1LdJo\\noMavBHU490UydurR/0C14maazFYoXSbjA9lLvGHqlzU56DfT48CyHb3/Dmv+FDOb\\nh1dIbMTj0/UuNyWoB8oecH69hWH5A1z5wCZ4P1dBAoGBALgpiHtNw+R7GAKVFoYs\\nXrrTBLuVZW8h1pTB2bU8/SHQTdRtlXcQlJBxu2QvM+KM8nRvKzoZ/ISDq9s2rtd8\\na0qabDIATcgBh6M2l0AMj9H1oMsBf5jbPKxcaV+ooZcF7BGNV2T8MSqGur5PgFqy\\n2sS+yUjh6fTNi/RPTygJa6Ae\\n-----END PRIVATE KEY-----\\n","client_email":"firebase-adminsdk-g1msg@project-backend-10cad.iam.gserviceaccount.com","client_id":"104328515242250757267","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-g1msg%40project-backend-10cad.iam.gserviceaccount.com"}');var n=e(509),r=e.n(n);const i=c,d=class{constructor(t){this.collection=t,this.connect()}connect(){try{0===r().apps.length&&(r().initializeApp({credential:r().credential.cert(i)}),console.log("connected to firebase"))}catch(t){console.log(t)}}}},82:(t,o,e)=>{e.r(o),e.d(o,{default:()=>s});var c=e(724),n=e(509),r=e.n(n),i=e(503),d=function(t,o,e,c){return new(e||(e=Promise))((function(n,r){function i(t){try{l(c.next(t))}catch(t){r(t)}}function d(t){try{l(c.throw(t))}catch(t){r(t)}}function l(t){var o;t.done?n(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(i,d)}l((c=c.apply(t,o||[])).next())}))};class l extends c.Z{constructor(){super("carts")}createNewCart(){return d(this,void 0,void 0,(function*(){try{return{cartCreated:yield r().firestore().collection(this.collection).add({timestamp:Date.now(),products:[]}),msg:"Cart succesfully created!"}}catch(t){console.log("Method createNewCart: ",t)}}))}checkIfCartExists(t){return d(this,void 0,void 0,(function*(){try{const o=yield r().firestore().collection(this.collection).doc(t.toString());return void 0!==(yield o.get()).data()&&o}catch(t){console.log("Method addToCartById: ",t)}}))}deleteCartById(t){return d(this,void 0,void 0,(function*(){try{const o=yield this.checkIfCartExists(t);if(!o)return-2;o.delete()}catch(t){console.log("Method cartDeleteById: ",t)}}))}getProductsByCartId(t){return d(this,void 0,void 0,(function*(){try{const o=yield this.checkIfCartExists(t);return o?(yield o.get()).data():{error:"Cart not found"}}catch(t){console.log(t)}}))}addProductsById(t,o){return d(this,void 0,void 0,(function*(){try{const e=yield this.checkIfCartExists(t);return e?!0===(yield i.default.checkProductInCollection(o.id))?(e.update({products:r().firestore.FieldValue.arrayUnion(o)}),{msg:"Product succesfully added."}):{msg:"Product not found in products collection."}:{error:"Cart not found"}}catch(t){console.log(t)}}))}deleteProductByCartId(t,o){return d(this,void 0,void 0,(function*(){try{const e=yield this.checkIfCartExists(t);if(e){return 0===(yield e.get()).data().products.filter((t=>t.id===o)).length?{error:`Product id: ${o} not found.`}:(yield r().firestore().collection(this.collection).doc(t.toString()).update({products:r().firestore.FieldValue.arrayRemove({id:o})}),{msg:"Product succesfully deleted."})}return{error:"Cart not found"}}catch(t){console.log(t)}}))}}const s=new l},503:(t,o,e)=>{e.r(o),e.d(o,{default:()=>l});var c=e(724),n=e(509),r=e.n(n),i=function(t,o,e,c){return new(e||(e=Promise))((function(n,r){function i(t){try{l(c.next(t))}catch(t){r(t)}}function d(t){try{l(c.throw(t))}catch(t){r(t)}}function l(t){var o;t.done?n(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(i,d)}l((c=c.apply(t,o||[])).next())}))};class d extends c.Z{constructor(){super("products")}getAll(){return i(this,void 0,void 0,(function*(){try{const t=yield r().firestore().collection(this.collection).get();return{itemsData:t.docs.map((t=>t.data())),itemsId:t.docs.map((t=>t.id))}}catch(t){console.log(t)}}))}checkProductInCollection(t){return i(this,void 0,void 0,(function*(){try{return!!(yield r().firestore().collection(this.collection).doc(t.toString()).get()).exists||{error:"Product not found"}}catch(t){console.log(t)}}))}getById(t){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).get()).data():{error:"Product not found"}}catch(t){console.log(t)}}))}addProduct(t){return i(this,void 0,void 0,(function*(){try{return yield r().firestore().collection(this.collection).add(t)}catch(t){console.log(t)}}))}updateProductById(t,o){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).update(o),{msg:"Product Updated"}):{msg:"Product not found in products collection."}}catch(t){console.log(t)}}))}deleteProductById(t){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).delete(),{msg:"Product Deleted"}):{msg:"Product not found in products collection."}}catch(t){console.log(t)}}))}}const l=new d}};